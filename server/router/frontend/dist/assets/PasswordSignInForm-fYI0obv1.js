import{d as w,e as j,u as v,f as C,h as k,j as s,I as c,B as y,L as N,i as L,s as b,t as I,k as S,n as T}from"./index-B7c9fGsa.js";import{r as d}from"./leaflet-vendor-CTVbxAuc.js";function B(){const t=w(),u=j(),{profile:l}=v(),{initialize:m}=C(),a=k(!1),[n,f]=d.useState(l.demo?"demo":""),[o,p]=d.useState(l.demo?"secret":""),g=e=>{const r=e.target.value;f(r)},h=e=>{const r=e.target.value;p(r)},x=e=>{e.preventDefault(),i()},i=async()=>{if(!(n===""||o==="")&&!a.isLoading){try{a.setLoading();const e=await L.signIn({credentials:{case:"passwordCredentials",value:{username:n,password:o}}});e.accessToken&&b(e.accessToken,e.accessTokenExpiresAt?I(e.accessTokenExpiresAt):void 0),await m(),u("/")}catch(e){S(e,T.error,{fallbackMessage:"Failed to sign in."})}a.setFinish()}};return s.jsxs("form",{className:"w-full mt-2",onSubmit:x,children:[s.jsxs("div",{className:"flex flex-col justify-start items-start w-full gap-4",children:[s.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[s.jsx("span",{className:"leading-8 text-muted-foreground",children:t("common.username")}),s.jsx(c,{className:"w-full bg-background h-10",type:"text",readOnly:a.isLoading,placeholder:t("common.username"),value:n,autoComplete:"username",autoCapitalize:"off",spellCheck:!1,onChange:g,required:!0})]}),s.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[s.jsx("span",{className:"leading-8 text-muted-foreground",children:t("common.password")}),s.jsx(c,{className:"w-full bg-background h-10",type:"password",readOnly:a.isLoading,placeholder:t("common.password"),value:o,autoComplete:"current-password",autoCapitalize:"off",spellCheck:!1,onChange:h,required:!0})]})]}),s.jsx("div",{className:"flex flex-row justify-end items-center w-full mt-6",children:s.jsxs(y,{type:"submit",className:"w-full h-10",disabled:a.isLoading,onClick:i,children:[t("common.sign-in"),a.isLoading&&s.jsx(N,{className:"w-5 h-auto ml-2 animate-spin opacity-60"})]})})]})}export{B as P};
